# Алгоритм решения задачи с поиском пересечения

Для решения задачи был написан псевдо-код показывающий алгоритм поиска. Посмотреть можно тут (https://github.com/GorokhovDV/TestTaskVolgograd/raw/master/FindWalk/FriendsController.php). Файл выполнен как command для Yii 2 без самого метода вызова. По сути запускается для каждого сообщения трекового и выполняет поиск по всем сообщениям текущим с момента последнего сна.

Решение совсем сырое и нет тестов и нет объектов которые присутсвуют в решении, но мысль уловить можно. Плюс мы уложились в малое кол-во запросов к базе, и они все оптимальные если по полям (координаты и таймстемпы) стоят индексы. Еще нужно условие на то что бы чистить прогулки при условии что дабавляются новые ну и саму обертку для запосов данных по треку.

# Шардинг и репликация

В абстрактном смыссле без определения технологии на эту тему сложно рассуждать. Репликация необходима скорее как средство резервирования и разделения на чтение/запись. Например все соединения на чтение смотрят на слейв а все на запись на мастер. Плюс реплицировать можно слейв на несколко нод для быстрого доступа из апликейшена.

По поводу шардинга - тоже нужно понимать технологии и требования к системе. По сути можно по гео принципу шардировать данные, или по временному принципу, разделять на архивные сегменты и текущие. Вариантов много, и решать эту проблему нужно осознавая проблемы и конкретную технологию и перспективы развития продукта.