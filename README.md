# Тестовое задание

## Схематичное представление архитектуры

![Image alt](https://github.com/GorokhovDV/TestTaskVolgograd/raw/master/images/scheme.gif)

## Решение задачи

Для решения поставленной задачи предлагается реализовать программынй комплекс, который включал бы следующие подсистемы:

0. Инфраструктура на физическом уровне
1. Система организации очередей
2. Система обработки поступивших сообщений
3. Система долговременного хранения нереляционных данных
4. Система долговременного хранения реляционных данных
5. Система обработки сообщений из долговременно хранилища и отдача сообщений клиенту (API)
6. Описание принципов решения задачи
7. Программный код части поставленной задачи 

### 0. Инфраструктура на физическом уровне

Для реализации поставленной задачи в масштабах необходимых что бы обеспечить безотказное функционирование системы (в условиях задачи отсутсвует требования по отказоустойчивости и не определена нагрузка на приложение) предлагается использовать: 
* либо кластер из минимум 3-х физических серверов объединенных в общее дисковое пространство с помощью технологии Ceph и настроенных на этих серверах отдельных виртуальных машинах для подсистем: 1. хранения нереляционных данных, 2. хранения реляционных данных, 3. подсистемы организации очередей, 4. остальное пространство (в рамках 30-40% оставшихся мощностей) организовать как систему оркестровки Kubernetes на которой разместить все необьходимые сервисы. Оставшиеся можности кластера оставить под развитие системы.
* либо использорвать уже готовые облачные системы на AWS или YandexCloud с хранением баз данных у провайдеров баз данных или в этих же системах.

Резервоное копирование данных предусмотреть в отдельные системы долговременного хранения (например отдельная услуга у компании Selectel по хранение бекапов).

Сам код и его компоненты следует вести в системах контроля версий (GitLab, GitHub, BitBucket, и иные с поддержкой CI/CD для бесшовной развертки на продакшн окружение)

Все функциональные сервисы должны в рамках собственного репозитория содержать Dockerfile опитывающий формирование докер-контейнера.

### 1. Система организации очередей

В качестве организации системы очередей традиционно предлагается использовать сервис RabbitMQ. Данный функционал обязательно должен быть выведен из Kebernetes и располагаться на изолированной виртуальной машине.

### 2. Система обработки поступивших сообщений

Для определения стратегии решения задачи в области обработки поступивших сообщений не хвататет требований в части скорости принятия решения или обработки сообщения. Будем исходить из требований к системе приближенной к системе реального времени в которой скорость реакции на появление в системе сообщения от устройства должна регламентироваться секундами. Тогда для достижения подобного рещзультата предлагается к разработке микросевисы-демоны написанные на языках C (Си) или GoLang, способные в многопоточном режиме обеспечить разбор сообщений из менеджера очередей и сохранение их в системе долговременного хранения оригиназьных сообщений.

Именно на этом уровне предлагается отсеивать дубликаты (а именно помечать сообщения как дубликаты, все равно сохраняя).

 
    








